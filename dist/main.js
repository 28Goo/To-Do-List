(()=>{"use strict";let e=[];class t{constructor(e){this.title=e,this.id=0,this.tasks=[]}addID(e){this.id=e}}function n(){localStorage.setItem("projects",JSON.stringify(e))}let o=0;function s(){if(0===e.length)return void l();l();const t=document.querySelector(".projects");for(let n=0;n<e.length;n++){const o=document.createElement("div");o.classList.add("project"),o.dataset.value=`${n}`;const s=document.createElement("h4");s.classList.add("project-title"),s.textContent=e[n].title;const l=document.createElement("span");l.classList.add("project-remover"),l.dataset.index=n,l.textContent="X",t.appendChild(o),o.appendChild(l),o.appendChild(s)}}function l(){document.querySelector(".projects").innerHTML=""}function r(t){if(0===e.length||0===e[t].tasks.length)return void a();a();const n=document.querySelector(".task-container");for(let o=0;o<e[t].tasks.length;o++){const s=document.createElement("div");s.classList.add("task"),s.dataset.index=o;const l=document.createElement("div");l.classList.add("title-container");const r=document.createElement("span");r.classList.add("task-remover"),r.dataset.index=o,r.textContent="X";const a=document.createElement("h3");a.textContent=e[t].tasks[o].title;const c=document.createElement("p");c.textContent=`Due Date: ${e[t].tasks[o].dueDate}`,n.appendChild(s),s.appendChild(l),l.appendChild(r),l.appendChild(a),s.appendChild(c)}}function a(){document.querySelector(".task-container").innerHTML=""}function c(){document.querySelectorAll(".project").forEach((e=>{e.addEventListener("click",(()=>{o=parseInt(e.dataset.value),r(o)})),o=parseInt(e.dataset.value),r(o)}))}e=JSON.parse(localStorage.getItem("projects")),e||(e=[]),s(),r(o),window.addEventListener("click",(l=>{"show-project-form"===l.target.id?function(){const e=document.querySelector(".project-form");e.style.display&&"none"!==e.style.display?e.style.display="none":e.style.display="flex"}():"add-project"===l.target.id?function(){const o=document.querySelector(".project-form"),l=document.querySelector("#project-title");if(""===l.value)return void alert("Project cannot be blank.");for(let t=0;t<e.length;t++)if(l.value===e[t].title)return void alert("Project already exists.");const r=new t(l.value);e.push(r);for(let t=0;t<e.length;t++)r.addID(t);l.value=null,o.style.display="none",s(),c(),n()}():"project-remover"===l.target.className?function(t){e.splice(t.target.dataset.index,1),console.log(e),n(),s(),c(),0===e.length&&a()}(l):"add-task-button"===l.target.id?function(){if(!e[0])return void alert("Add a Project First.");const t=document.querySelector(".task-form"),n=document.querySelector("main");t.style.display&&"none"!==t.style.display?(t.style.display="none",n.style.filter="brightness(100%)"):(t.style.display="flex",n.style.filter="brightness(50%)",n.style.pointerEvents="none")}():"add-task-form"===l.target.id?function(){const t=document.querySelector("#task-title"),s=document.querySelector("#description"),l=document.querySelector("#due-date"),a=document.querySelector("#priority");if(""===t.value||""===s.value||""===l.value)return void alert("Fill up the whole form.");let c;c=0===a.selectedIndex?"High":1===a.selectedIndex?"Medium":"Low";const d=new class{constructor(e,t,n,o){this.title=e,this.description=t,this.dueDate=n,this.priority=o}}(t.value,s.value,l.value,c);for(let t=0;t<e.length;t++)if(e[t].id===o){e[o].tasks.push(d),n();break}!function(){const e=document.querySelector(".task-form"),t=document.querySelector("main"),n=document.querySelector("#task-title"),o=document.querySelector("#description"),s=document.querySelector("#due-date");e.style.display="none",t.style.filter="brightness(100%)",t.style.pointerEvents="auto",n.value=null,o.value=null,s.value=null}(),r(o)}():"task-remover"===l.target.className?function(t){e[o].tasks.splice([parseInt(t.target.dataset.index)],1),n(),r(o)}(l):"cancel-form"===l.target.id&&function(){const e=document.querySelector(".task-form"),t=document.querySelector("main");e.style.display="none",t.style.filter="brightness(100%)",t.style.pointerEvents="auto"}()})),window.addEventListener("keydown",(e=>{"Enter"===e.key&&e.preventDefault()})),c()})();