(()=>{"use strict";let t=[];class e{constructor(t){this.title=t,this.id=0,this.tasks=[]}addID(t){this.id=t}}let s=0;function a(){document.querySelector(".task-container").innerHTML=""}function n(e){if(0===t.length||0===t[e].tasks.length)return void a();a();const n=document.querySelector(".task-container");for(let s=0;s<t[e].tasks.length;s++){const a=document.createElement("div");a.classList.add("task"),a.dataset.index=s;const o=document.createElement("div");o.classList.add("left-container");const r=document.createElement("span");r.classList.add("task-remover"),r.dataset.index=s,r.textContent="X";const l=document.createElement("div");l.classList.add("title-container");const i=document.createElement("h3");i.classList.add("task-title"),i.dataset.index=s,i.textContent=t[e].tasks[s].title,i.style.color="rgb(27, 27, 34)";const d=document.createElement("input");d.classList.add("task-title-editor"),d.type="text",d.value=`${i.textContent}`,d.maxLength="30";const c=document.createElement("p");c.classList.add("task-description"),c.dataset.index=s,c.textContent=t[e].tasks[s].description,c.style.color="rgb(27, 27, 34)";const u=document.createElement("input");u.classList.add("task-description-editor"),u.type="text",u.value=`${c.textContent}`,u.maxLength="40";const p=document.createElement("h4");p.classList.add("task-due-date"),p.dataset.index=s,p.textContent=`Due Date: ${t[e].tasks[s].dueDate}`,p.style.color="rgb(27, 27, 34)";const y=document.createElement("input");y.classList.add("task-due-date-editor"),y.type="date",y.value=`${p.textContent}`;const m=document.createElement("div");m.dataset.index=s,m.classList.add("task-priority-editor");const v=document.createElement("div");v.classList.add("High");const k=document.createElement("div");k.classList.add("Medium");const g=document.createElement("div");g.classList.add("Low"),n.appendChild(a),a.appendChild(o),o.appendChild(r),o.appendChild(l),l.appendChild(i),l.appendChild(d),a.appendChild(c),a.appendChild(u),a.appendChild(p),a.appendChild(y),a.appendChild(m),m.appendChild(v),m.appendChild(k),m.appendChild(g)}!function(){const e=document.querySelectorAll(".task");for(let a=0;a<e.length;a++)"High"===t[s].tasks[a].priority?(e[a].style.background="rgb(252, 71, 71)",e[a].dataset.priority="High"):"Medium"===t[s].tasks[a].priority?(e[a].style.background="rgb(241, 182, 71)",e[a].dataset.priority="Medium"):(e[a].style.background="rgb(238, 238, 81)",e[a].dataset.priority="Low")}()}function o(){document.querySelector(".projects").innerHTML=""}function r(){if(0===t.length)return void o();o();const e=document.querySelector(".projects");for(let s=0;s<t.length;s++){const a=document.createElement("div");a.classList.add("project"),a.dataset.value=`${s}`;const n=document.createElement("h4");n.classList.add("project-title"),n.textContent=t[s].title;const o=document.createElement("span");o.classList.add("project-remover"),o.dataset.index=s,o.textContent="X",e.appendChild(a),a.appendChild(o),a.appendChild(n)}}function l(){const t=document.querySelectorAll(".project");if(0!==t.length){for(let e=0;e<t.length;e++)t[e].classList.remove("active-project");s=parseInt(t[t.length-1].dataset.value,10),n(s),t[t.length-1].classList.add("active-project")}}function i(){const s=document.querySelector(".project-form"),a=document.querySelector("#project-title");if(""===a.value)return void alert("Project cannot be blank.");for(let e=0;e<t.length;e++)if(a.value===t[e].title)return void alert("Project already exists.");const n=new e(a.value);t.push(n);for(let e=0;e<t.length;e++)n.addID(e);a.value=null,s.style.display="none",r(),l()}function d(){localStorage.setItem("projects",JSON.stringify(t))}function c(){const t=document.querySelectorAll(".project");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(()=>{s=parseInt(t[e].dataset.value,10),n(s);for(let e=0;e<t.length;e++)t[e].classList.remove("active-project");t[e].classList.add("active-project")}));0!==t.length&&(s=parseInt(t[0].dataset.value,10),n(s),t[0].classList.add("active-project"))}t=JSON.parse(localStorage.getItem("projects")),t||(t=[]),r(),n(s),window.addEventListener("click",(e=>{"show-project-form"===e.target.id?function(){const t=document.querySelector(".project-form");t.style.display&&"none"!==t.style.display?t.style.display="none":t.style.display="flex"}():"add-project"===e.target.id?(i(),l(),c(),d()):"project-remover"===e.target.className?(function(e){t.splice(e.target.dataset.index,1),r(),l(),0===t.length&&a()}(e),d()):"add-task-button"===e.target.id?function(){if(!t[0])return void alert("Add a Project First.");const e=document.querySelector(".task-form"),s=document.querySelector("main");e.style.display&&"none"!==e.style.display?(e.style.display="none",s.style.filter="brightness(100%)"):(e.style.display="flex",s.style.filter="brightness(50%)",s.style.pointerEvents="none")}():"add-task-form"===e.target.id?(function(){const e=document.querySelector("#task-title"),a=document.querySelector("#description"),o=document.querySelector("#due-date"),r=document.querySelector("#priority");if(""===e.value||""===a.value||""===o.value)return void alert("Fill up the whole form.");let l;l=0===r.selectedIndex?"High":1===r.selectedIndex?"Medium":"Low";const i=new class{constructor(t,e,s,a){this.title=t,this.description=e,this.dueDate=s,this.priority=a}}(e.value,a.value,o.value,l);for(let e=0;e<t.length;e++)if(t[e].id===s){t[s].tasks.push(i);break}!function(){const t=document.querySelector(".task-form"),e=document.querySelector("main"),s=document.querySelector("#task-title"),a=document.querySelector("#description"),n=document.querySelector("#due-date");t.style.display="none",e.style.filter="brightness(100%)",e.style.pointerEvents="auto",s.value=null,a.value=null,n.value=null}(),n(s)}(),d()):e.target.classList.contains("task-title")?(function(e){const a=document.querySelectorAll(".task-title"),o=document.querySelectorAll(".task-title-editor");for(let t=0;t<a.length;t++)a[t].style.display="block",o[t].classList.remove("active-task-editor");e.target.style.display="none";const r=parseInt(e.target.dataset.index,10);o[r].classList.add("active-task-editor"),o[r].addEventListener("keydown",(e=>{if("Enter"===e.key){if(""===o[r].value)return void alert("Task cannot be blank.");t[s].tasks[r].title=o[r].value,o[r].classList.remove("active-task-editor"),n(s)}}))}(e),d()):e.target.classList.contains("task-description")?(function(e){const a=document.querySelectorAll(".task-description"),o=document.querySelectorAll(".task-description-editor");for(let t=0;t<a.length;t++)a[t].style.display="block",o[t].classList.remove("active-task-editor");e.target.style.display="none";const r=parseInt(e.target.dataset.index,10);o[r].classList.add("active-task-editor"),o[r].addEventListener("keydown",(e=>{if("Enter"===e.key){if(""===o[r].value)return void alert("Description cannot be blank.");t[s].tasks[r].description=o[r].value,o[r].classList.remove("active-task-editor"),n(s)}}))}(e),d()):e.target.classList.contains("task-due-date")?(function(e){const a=document.querySelectorAll(".task-due-date"),o=document.querySelectorAll(".task-due-date-editor");for(let t=0;t<a.length;t++)a[t].style.display="block",o[t].classList.remove("active-task-editor");e.target.style.display="none";const r=parseInt(e.target.dataset.index,10);o[r].classList.add("active-task-editor"),o[r].addEventListener("keydown",(e=>{if("Enter"===e.key){if(""===o[r].value)return void alert("Date cannot be blank.");t[s].tasks[r].dueDate=o[r].value,o[r].classList.remove("active-task-editor"),n(s)}}))}(e),d()):e.target.classList.contains("task")?(function(e){const a=document.querySelectorAll(".task-priority-editor");for(let t=0;t<a.length;t++)a[t].classList.remove("active-priority-editor");const o=parseInt(e.target.dataset.index,10);a[o].classList.add("active-priority-editor"),document.querySelectorAll(".High")[o].addEventListener("click",(e=>{t[s].tasks[o].priority=e.target.className,n(s)})),document.querySelectorAll(".Medium")[o].addEventListener("click",(e=>{t[s].tasks[o].priority=e.target.className,n(s)})),document.querySelectorAll(".Low")[o].addEventListener("click",(e=>{t[s].tasks[o].priority=e.target.className,n(s)}))}(e),d()):"task-remover"===e.target.className?(function(e){t[s].tasks.splice([parseInt(e.target.dataset.index,10)],1),n(s)}(e),d()):"cancel-form"===e.target.id&&function(){const t=document.querySelector(".task-form"),e=document.querySelector("main");t.style.display="none",e.style.filter="brightness(100%)",e.style.pointerEvents="auto"}()})),window.addEventListener("keydown",(t=>{"Enter"===t.key&&t.preventDefault()})),document.querySelector("#project-title").addEventListener("keydown",(t=>{"Enter"===t.key&&i()})),c()})();