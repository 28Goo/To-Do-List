(()=>{"use strict";let t=[];class e{constructor(t){this.title=t,this.id=0,this.tasks=[]}addID(t){this.id=t}}let s=0;function n(){document.querySelector(".task-container").innerHTML=""}function a(e){if(0===t.length||0===t[e].tasks.length)return void n();n();const a=document.querySelector(".task-container");for(let s=0;s<t[e].tasks.length;s++){const n=document.createElement("div");n.classList.add("task"),n.dataset.index=s;const o=document.createElement("div");o.classList.add("left-container");const l=document.createElement("span");l.classList.add("task-remover"),l.dataset.index=s,l.textContent="X";const r=document.createElement("div");r.classList.add("title-container");const i=document.createElement("h3");i.classList.add("task-title"),i.dataset.index=s,i.textContent=t[e].tasks[s].title,i.style.color="rgb(27, 27, 34)";const d=document.createElement("input");d.classList.add("task-title-editor"),d.type="text",d.value=`${i.textContent}`,d.maxLength="30";const c=document.createElement("p");c.classList.add("task-description"),c.dataset.index=s,c.textContent=t[e].tasks[s].description,c.style.color="rgb(27, 27, 34)";const u=document.createElement("input");u.classList.add("task-description-editor"),u.type="text",u.value=`${c.textContent}`,u.maxLength="40";const p=document.createElement("h4");p.classList.add("task-due-date"),p.dataset.index=s,p.textContent=`Due Date: ${t[e].tasks[s].dueDate}`,p.style.color="rgb(27, 27, 34)";const m=document.createElement("input");m.classList.add("task-due-date-editor"),m.type="date",m.value=`${p.textContent}`;const y=document.createElement("div");y.dataset.index=s,y.classList.add("task-priority-editor");const v=document.createElement("div");v.classList.add("High");const k=document.createElement("div");k.classList.add("Medium");const g=document.createElement("div");g.classList.add("Low"),a.appendChild(n),n.appendChild(o),o.appendChild(l),o.appendChild(r),r.appendChild(i),r.appendChild(d),n.appendChild(c),n.appendChild(u),n.appendChild(p),n.appendChild(m),n.appendChild(y),y.appendChild(v),y.appendChild(k),y.appendChild(g)}!function(){const e=document.querySelectorAll(".task");for(let n=0;n<e.length;n++)"High"===t[s].tasks[n].priority?(e[n].style.background="rgb(252, 71, 71)",e[n].dataset.priority="High"):"Medium"===t[s].tasks[n].priority?(e[n].style.background="rgb(241, 182, 71)",e[n].dataset.priority="Medium"):(e[n].style.background="rgb(238, 238, 81)",e[n].dataset.priority="Low")}()}function o(){document.querySelector(".projects").innerHTML=""}function l(){if(0===t.length)return void o();o();const e=document.querySelector(".projects");for(let s=0;s<t.length;s++){const n=document.createElement("div");n.classList.add("project"),n.dataset.value=`${s}`;const a=document.createElement("h4");a.classList.add("project-title"),a.textContent=t[s].title;const o=document.createElement("span");o.classList.add("project-remover"),o.dataset.index=s,o.textContent="X",e.appendChild(n),n.appendChild(o),n.appendChild(a)}}function r(){const t=document.querySelectorAll(".project");if(0!==t.length){for(let e=0;e<t.length;e++)t[e].classList.remove("active-project");s=parseInt(t[t.length-1].dataset.value,10),a(s),t[t.length-1].classList.add("active-project")}}function i(){localStorage.setItem("projects",JSON.stringify(t))}function d(){const s=document.querySelector(".project-form"),n=document.querySelector("#project-title");if(""===n.value)return void alert("Project cannot be blank.");for(let e=0;e<t.length;e++)if(n.value===t[e].title)return void alert("Project already exists.");const a=new e(n.value);t.push(a);for(let e=0;e<t.length;e++)a.addID(e);n.value=null,s.style.display="none",l(),i(),r()}function c(){const t=document.querySelectorAll(".project");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(()=>{s=parseInt(t[e].dataset.value,10),a(s);for(let e=0;e<t.length;e++)t[e].classList.remove("active-project");t[e].classList.add("active-project")}))}t=JSON.parse(localStorage.getItem("projects")),t||(t=[]),l(),a(s),window.addEventListener("click",(e=>{"show-project-form"===e.target.id?function(){const t=document.querySelector(".project-form");t.style.display&&"none"!==t.style.display?t.style.display="none":t.style.display="flex"}():"add-project"===e.target.id?(d(),c()):"project-remover"===e.target.className?(function(e){t.splice(e.target.dataset.index,1),l(),r(),0===t.length&&n(),i()}(e),c()):"add-task-button"===e.target.id?function(){let e=new Date,s=e.getDate(),n=e.getMonth();const a=e.getFullYear();if(s<10&&(s=`0 ${s}`),n<10&&(n=`${n}`),e=`${a}-${n}-${s}`,document.getElementById("due-date").setAttribute("min",e),!t[0])return void alert("Add a Project First.");const o=document.querySelector(".task-form"),l=document.querySelector("main");o.style.display&&"none"!==o.style.display?(o.style.display="none",l.style.filter="brightness(100%)"):(o.style.display="flex",l.style.filter="brightness(50%)",l.style.pointerEvents="none")}():"add-task-form"===e.target.id?function(){const e=document.querySelector("#task-title"),n=document.querySelector("#description"),o=document.querySelector("#due-date"),l=document.querySelector("#priority");if(""===e.value||""===n.value||""===o.value)return void alert("Fill out the whole form.");let r;r=0===l.selectedIndex?"High":1===l.selectedIndex?"Medium":"Low";const d=new class{constructor(t,e,s,n){this.title=t,this.description=e,this.dueDate=s,this.priority=n}}(e.value,n.value,o.value,r);for(let e=0;e<t.length;e++)if(t[e].id===s){t[s].tasks.push(d);break}!function(){const t=document.querySelector(".task-form"),e=document.querySelector("main"),s=document.querySelector("#task-title"),n=document.querySelector("#description"),a=document.querySelector("#due-date");t.style.display="none",e.style.filter="brightness(100%)",e.style.pointerEvents="auto",s.value=null,n.value=null,a.value=null}(),a(s),i()}():e.target.classList.contains("task-title")?function(e){const n=document.querySelectorAll(".task-title"),o=document.querySelectorAll(".task-title-editor");for(let t=0;t<n.length;t++)n[t].style.display="block",o[t].classList.remove("active-task-editor");e.target.style.display="none";const l=parseInt(e.target.dataset.index,10);o[l].classList.add("active-task-editor"),o[l].addEventListener("keydown",(e=>{if("Enter"===e.key){if(""===o[l].value)return void alert("Task cannot be blank.");t[s].tasks[l].title=o[l].value,o[l].classList.remove("active-task-editor"),a(s),i()}}))}(e):e.target.classList.contains("task-description")?function(e){const n=document.querySelectorAll(".task-description"),o=document.querySelectorAll(".task-description-editor");for(let t=0;t<n.length;t++)n[t].style.display="block",o[t].classList.remove("active-task-editor");e.target.style.display="none";const l=parseInt(e.target.dataset.index,10);o[l].classList.add("active-task-editor"),o[l].addEventListener("keydown",(e=>{if("Enter"===e.key){if(""===o[l].value)return void alert("Description cannot be blank.");t[s].tasks[l].description=o[l].value,o[l].classList.remove("active-task-editor"),a(s),i()}}))}(e):e.target.classList.contains("task-due-date")?function(e){let n=new Date,o=n.getDate(),l=n.getMonth();const r=n.getFullYear();o<10&&(o=`0 ${o}`),l<10&&(l=`${l}`),n=`${r}-${l}-${o}`;const d=document.querySelectorAll(".task-due-date"),c=document.querySelectorAll(".task-due-date-editor");for(let t=0;t<d.length;t++)d[t].style.display="block",c[t].classList.remove("active-task-editor"),c[t].setAttribute("min",n);e.target.style.display="none";const u=parseInt(e.target.dataset.index,10);c[u].classList.add("active-task-editor"),c[u].addEventListener("keydown",(e=>{if("Enter"===e.key){if(""===c[u].value)return void alert("Date cannot be blank.");t[s].tasks[u].dueDate=c[u].value,c[u].classList.remove("active-task-editor"),a(s),i()}}))}(e):e.target.classList.contains("task")?function(e){const n=document.querySelectorAll(".task-priority-editor");for(let t=0;t<n.length;t++)n[t].classList.remove("active-priority-editor");const o=parseInt(e.target.dataset.index,10);n[o].classList.add("active-priority-editor"),document.querySelectorAll(".High")[o].addEventListener("click",(e=>{t[s].tasks[o].priority=e.target.className,a(s),i()})),document.querySelectorAll(".Medium")[o].addEventListener("click",(e=>{t[s].tasks[o].priority=e.target.className,a(s),i()})),document.querySelectorAll(".Low")[o].addEventListener("click",(e=>{t[s].tasks[o].priority=e.target.className,a(s),i()}))}(e):"task-remover"===e.target.className?function(e){t[s].tasks.splice([parseInt(e.target.dataset.index,10)],1),a(s),i()}(e):"cancel-form"===e.target.id&&function(){const t=document.querySelector(".task-form"),e=document.querySelector("main");t.style.display="none",e.style.filter="brightness(100%)",e.style.pointerEvents="auto"}()})),document.querySelector("#project-title").addEventListener("keydown",(t=>{"Enter"===t.key&&(d(),c())})),window.addEventListener("keydown",(t=>{"Enter"===t.key&&t.preventDefault()})),c(),function(){const t=document.querySelectorAll(".project");0!==t.length&&(s=parseInt(t[0].dataset.value,10),a(s),t[0].classList.add("active-project"))}()})();