(()=>{"use strict";let t=[];class e{constructor(t){this.title=t,this.id=0,this.tasks=[]}addID(t){this.id=t}}function s(){localStorage.setItem("projects",JSON.stringify(t))}let a=0;function n(){if(0===t.length)return void l();l();const e=document.querySelector(".projects");for(let s=0;s<t.length;s++){const a=document.createElement("div");a.classList.add("project"),a.dataset.value=`${s}`;const n=document.createElement("h4");n.classList.add("project-title"),n.textContent=t[s].title;const o=document.createElement("span");o.classList.add("project-remover"),o.dataset.index=s,o.textContent="X",e.appendChild(a),a.appendChild(o),a.appendChild(n)}}function o(){c();const t=document.querySelectorAll(".project");if(0!==t.length){for(let e=0;e<t.length;e++)t[e].classList.remove("active-project");a=parseInt(t[t.length-1].dataset.value),r(a),t[t.length-1].classList.add("active-project")}}function l(){document.querySelector(".projects").innerHTML=""}function r(e){if(0===t.length||0===t[e].tasks.length)return void i();i();const s=document.querySelector(".task-container");for(let a=0;a<t[e].tasks.length;a++){const n=document.createElement("div");n.classList.add("task"),n.dataset.index=a;const o=document.createElement("div");o.classList.add("left-container");const l=document.createElement("span");l.classList.add("task-remover"),l.dataset.index=a,l.textContent="X";const r=document.createElement("div");r.classList.add("title-container");const i=document.createElement("h3");i.classList.add("task-title"),i.dataset.index=a,i.textContent=t[e].tasks[a].title,i.style.color="rgb(27, 27, 34)";const d=document.createElement("input");d.classList.add("task-title-editor"),d.type="text",d.value=`${i.textContent}`,d.maxLength="30";const c=document.createElement("p");c.classList.add("task-description"),c.dataset.index=a,c.textContent=t[e].tasks[a].description,c.style.color="rgb(27, 27, 34)";const u=document.createElement("input");u.classList.add("task-description-editor"),u.type="text",u.value=`${c.textContent}`,u.maxLength="40";const p=document.createElement("h4");p.classList.add("task-due-date"),p.dataset.index=a,p.textContent=`Due Date: ${t[e].tasks[a].dueDate}`,p.style.color="rgb(27, 27, 34)";const y=document.createElement("input");y.classList.add("task-due-date-editor"),y.type="date",y.value=`${p.textContent}`;const m=document.createElement("div");m.dataset.index=a,m.classList.add("task-priority-editor");const v=document.createElement("div");v.classList.add("High");const k=document.createElement("div");k.classList.add("Medium");const g=document.createElement("div");g.classList.add("Low"),s.appendChild(n),n.appendChild(o),o.appendChild(l),o.appendChild(r),r.appendChild(i),r.appendChild(d),n.appendChild(c),n.appendChild(u),n.appendChild(p),n.appendChild(y),n.appendChild(m),m.appendChild(v),m.appendChild(k),m.appendChild(g)}!function(){const e=document.querySelectorAll(".task");for(let s=0;s<e.length;s++)"High"===t[a].tasks[s].priority?(e[s].style.background="rgb(252, 71, 71)",e[s].dataset.priority="High"):"Medium"===t[a].tasks[s].priority?(e[s].style.background="rgb(241, 182, 71)",e[s].dataset.priority="Medium"):(e[s].style.background="rgb(238, 238, 81)",e[s].dataset.priority="Low")}()}function i(){document.querySelector(".task-container").innerHTML=""}function d(){const a=document.querySelector(".project-form"),l=document.querySelector("#project-title");if(""===l.value)return void alert("Project cannot be blank.");for(let e=0;e<t.length;e++)if(l.value===t[e].title)return void alert("Project already exists.");const r=new e(l.value);t.push(r);for(let e=0;e<t.length;e++)r.addID(e);l.value=null,a.style.display="none",n(),o(),s()}function c(){const t=document.querySelectorAll(".project");for(let e=0;e<t.length;e++)t[e].addEventListener("click",(()=>{a=parseInt(t[e].dataset.value),r(a);for(let e=0;e<t.length;e++)t[e].classList.remove("active-project");t[e].classList.add("active-project")}));0!==t.length&&(a=parseInt(t[0].dataset.value),r(a),t[0].classList.add("active-project"))}t=JSON.parse(localStorage.getItem("projects")),t||(t=[]),n(),r(a),window.addEventListener("click",(e=>{"show-project-form"===e.target.id?function(){const t=document.querySelector(".project-form");t.style.display&&"none"!==t.style.display?t.style.display="none":t.style.display="flex"}():"add-project"===e.target.id?d():"project-remover"===e.target.className?function(e){t.splice(e.target.dataset.index,1),s(),n(),o(),0===t.length&&i()}(e):"add-task-button"===e.target.id?function(){if(!t[0])return void alert("Add a Project First.");const e=document.querySelector(".task-form"),s=document.querySelector("main");e.style.display&&"none"!==e.style.display?(e.style.display="none",s.style.filter="brightness(100%)"):(e.style.display="flex",s.style.filter="brightness(50%)",s.style.pointerEvents="none")}():"add-task-form"===e.target.id?function(){const e=document.querySelector("#task-title"),n=document.querySelector("#description"),o=document.querySelector("#due-date"),l=document.querySelector("#priority");if(""===e.value||""===n.value||""===o.value)return void alert("Fill up the whole form.");let i;i=0===l.selectedIndex?"High":1===l.selectedIndex?"Medium":"Low";const d=new class{constructor(t,e,s,a){this.title=t,this.description=e,this.dueDate=s,this.priority=a}}(e.value,n.value,o.value,i);for(let e=0;e<t.length;e++)if(t[e].id===a){t[a].tasks.push(d),s();break}!function(){const t=document.querySelector(".task-form"),e=document.querySelector("main"),s=document.querySelector("#task-title"),a=document.querySelector("#description"),n=document.querySelector("#due-date");t.style.display="none",e.style.filter="brightness(100%)",e.style.pointerEvents="auto",s.value=null,a.value=null,n.value=null}(),r(a)}():e.target.classList.contains("task-title")?function(e){const n=document.querySelectorAll(".task-title"),o=document.querySelectorAll(".task-title-editor");for(let t=0;t<n.length;t++)n[t].style.display="block",o[t].classList.remove("active-task-editor");e.target.style.display="none";let l=parseInt(e.target.dataset.index);o[l].classList.add("active-task-editor"),o[l].addEventListener("keydown",(e=>{if("Enter"===e.key){if(""===o[l].value)return void alert("Task cannot be blank.");t[a].tasks[l].title=o[l].value,o[l].classList.remove("active-task-editor"),r(a),s()}}))}(e):e.target.classList.contains("task-description")?function(e){const n=document.querySelectorAll(".task-description"),o=document.querySelectorAll(".task-description-editor");for(let t=0;t<n.length;t++)n[t].style.display="block",o[t].classList.remove("active-task-editor");e.target.style.display="none";let l=parseInt(e.target.dataset.index);o[l].classList.add("active-task-editor"),o[l].addEventListener("keydown",(e=>{if("Enter"===e.key){if(""===o[l].value)return void alert("Description cannot be blank.");t[a].tasks[l].description=o[l].value,o[l].classList.remove("active-task-editor"),r(a),s()}}))}(e):e.target.classList.contains("task-due-date")?function(e){const n=document.querySelectorAll(".task-due-date"),o=document.querySelectorAll(".task-due-date-editor");for(let t=0;t<n.length;t++)n[t].style.display="block",o[t].classList.remove("active-task-editor");e.target.style.display="none";let l=parseInt(e.target.dataset.index);o[l].classList.add("active-task-editor"),o[l].addEventListener("keydown",(e=>{if("Enter"===e.key){if(""===o[l].value)return void alert("Date cannot be blank.");t[a].tasks[l].dueDate=o[l].value,o[l].classList.remove("active-task-editor"),r(a),s()}}))}(e):e.target.classList.contains("task")?function(e){e.target;const s=document.querySelectorAll(".task-priority-editor");for(let t=0;t<s.length;t++)s[t].classList.remove("active-priority-editor");let n=parseInt(e.target.dataset.index);s[n].classList.add("active-priority-editor"),document.querySelectorAll(".High")[n].addEventListener("click",(e=>{t[a].tasks[n].priority=e.target.className,r(a)})),document.querySelectorAll(".Medium")[n].addEventListener("click",(e=>{t[a].tasks[n].priority=e.target.className,r(a)})),document.querySelectorAll(".Low")[n].addEventListener("click",(e=>{t[a].tasks[n].priority=e.target.className,r(a)}))}(e):"task-remover"===e.target.className?function(e){t[a].tasks.splice([parseInt(e.target.dataset.index)],1),s(),r(a)}(e):"cancel-form"===e.target.id&&function(){const t=document.querySelector(".task-form"),e=document.querySelector("main");t.style.display="none",e.style.filter="brightness(100%)",e.style.pointerEvents="auto"}()})),window.addEventListener("keydown",(t=>{"Enter"===t.key&&t.preventDefault()})),document.querySelector("#project-title").addEventListener("keydown",(t=>{"Enter"===t.key&&d()})),c()})();